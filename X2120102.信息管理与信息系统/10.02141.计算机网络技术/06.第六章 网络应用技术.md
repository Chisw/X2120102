# 第六章 网络应用技术

## 第一节 网络应用概述

工作模式：

- C/S
  - 一般客户/服务器
  - P2P 模式
- B/S
  - 一种特殊的 C/S
  - 非专用客户端，而是通用浏览器
  - 减少升级维护成本，使用灵活
- P2P
  - 对等模式
  - 又一种特殊 C/S
  - 既发请求也提供服务

## 第二节 DNS

将域名转换为 IP 地址的服务

- 用户层面：使用域名进行地址描述
- 数据报层面：使用 IP 地址进行路由和转发

核心内容：

1. 层次域名空间
  - 格式：点 + 标号，...三级域名.二级域名.顶级域名
  - 组成：英文字母 + 数字 + ‘-’
  - 每个标号不能超过 63 个字符
  - 不区分大小写
  - 整个域名不能超过 255 个字符
  - 顶级域名由 ICANN 统一管理
  - 三大类：
    - 国家顶级域名 nTLD
    - 通用顶级域名 gTLD：.com .net .org .edu .gov .mil .int
    - 基础解构域名： .arpa，反向域名解析
  - 我国 .cn 管理机构：中国互联网网络信息中心 CNNIC
    - 7 个类别：.ac .com .edu .gov .mil .net .org
    - 行政区域名：bj sh

2. 域名服务器
  - 以域为单位
  - 一个服务器所管辖的范围称为区 zone
  - 避免访问同一服务器，提升速度
  - 分类：
    - 根域名服务器：13 个，a.rootservers.net ~ m.rootservers.net，知道所有顶级域名服务器的域名和 IP 地址
    - 顶级域名服务器
    - 权限域名服务器
    - 本地域名服务器

3. 域名解析过程
  - 递归解析：本地域名服务器
  - 迭代解析：本地没有时，向根域名服务器开始，不断向下查询

DNS 使用 UDP 查询，各级域名服务器设有高速缓存

## 第三节 FTP

两台主机间远距离传输文件

屏蔽了不同计算机间的细节，适用于异构网络中任意计算机之间传输文件

C/S 模式

需要：服务器名、用户名、密码

使用 TCP 提供可靠传输服务，通信由若干个进程实现

一个服务器进程可以为多个客户端进程服务

服务器进程：

- 一个主进程：负责接收新的请求
- 若干从属进程：负责处理单个请求

主进程工作步骤：

- 打开熟知端口：21
- 等待客户进程发出请求
- 启动从属进程处理，处理完终止，有可能创建其它子进程
- 回到等待状态

主进程与从属进程并发进行

传输时，客户端、服务端建立两个并行的 TCP 连接：

- 控制连接
  - 整个会话中一直打开
- 数据连接
  - 传输文件，熟知端口 20

## 第四节 电子邮件

### 一、基本概念

瞬间发送文本、文件，淘汰电报业

构成部分：

- 用户代理 UA
  - 客户端：Foxmail 等
  - 功能：编辑、显示、处理、通信
- 邮件服务器
  - 使用发送/读取两个协议
- 邮件发送/读取协议
  - 常用发送：简单邮件传送协议 SMTP
  - 常用读取：邮件协议 POP3

TCP/IP 下的电子邮件地址：邮箱名@邮箱服务器名

内容：

- 首部 Header
  - To: 1+ 地址
  - Subject: 主题
  - Cc: 邮件副本
  - From:
  - Date:
  - Reply-To:
- 主体 Body

步骤：

- 用户代理编辑邮件
- 使用 SMTP 发送至邮件服务器，保存在缓冲区，等待发送
- 发方与收方服务器建立 TCP 连接，熟知端口号 25，依次发送，中间不被其它接收，超时发送失败
- 收方接收后等待下载
- 接收邮件使用 POP3 或 IMAP 下载到本地

### 二、SMTP、POP3、IMAP 基本机制

SMTP:
- 阶段：
  - 连接建立
  - 邮件传送
  - 连接释放
- 缺点
  - 不能发送二进制文件，只限 7 位 ASCII 码
  - 无鉴别，From 后面任意地址
  - 明文传输，易截获泄密

POP:
- 服务器下载后删除，无法重复读取

IMAP:
- 不删除会一直保留

现代使用 Web HTTP 而非传统协议

## 第五节 万维网

### 一、WWW 概念与构成

Tim Berners Lee 1989 提出

1990.11.13 写出第一个网页，标志万维网诞生

解决问题：

- 世界各地网页如何标识：URL
- 文档间如何链接，数据如何交换：HTTP
- 不同类型网页如何正确打开显示：HTML

### 二、统一资源定位 URL

协议://主机:端口/路径

熟知端口：80

### 三、HTTP

一个应用层协议，使用 TCP 连接可靠传输

每次都是由客户端发出请求，服务端发出响应

步骤：

- 输入 URL 或点击链接
- 解析 URL 中 IP 地址
- 浏览器、服务器建立 TCP 连接
- 浏览器发送 HTTP 请求报文，获取目标文件
- 服务器发送 HTTP 响应报文
- 释放 TCP 连接
- 浏览器渲染页面

两类报文：

- 请求报文
  - 请求行
    - 请求方法：HEAD 只返回响应头
    - URL
    - HTTP 版本
  - 请求头部行
    - User-Agent
    - Accept
    - Accept-Language
    - Host
    - Connection: 释放还是保持
  - 空行
  - 请求数据
- 响应报文
  - 状态行
    - 1**：指示信息
    - 2**：成功
    - 3**：重定向
    - 4**：客户端错误
    - 5**：服务端错误
    - 200 OK
    - 400 Bad Request
    - 401 Unauthorized
    - 403 Forbidden
    - 404 Not Found
    - 500 Internal Server Error
    - 503 Server Unavailable
  - 消息头部
    - Date
    - Content-Type
    - Content-Length
    - Server
  - 空行
  - 响应正文

### 四、Cookie 和 Session 机制

HTTP 无状态，数据交换完毕关闭连接

当服务端无法跟踪用户的话，每次都需要账号、密码

1. Cookie 机制

服务器在客户端保存的一小段文本

统计实际数据、访问控制、偏好设置、记录账号信息

信息泄露

2. Session 机制

服务端保存，针对每个用户创建 SessionID（存放在 Cookie 或 query）

### 五、超文本标记语言

前身：IBM 20 世纪 60 年代的通用标记语言

1980 通过 SGML 推出

XML 是对 HTML 的补充

## 第六节 电子商务应用

1997 年 11 月，国际商会在巴黎举行首届世界电子商务会议

### 一、电子商务类型

1. 按交易对象分类
  - B2C: 亚马逊、京东
  - B2B：阿里巴巴
  - C2C：淘宝
  - O2O：滴滴、大众点评

2. 按商务活动内容分类
  - 间接电子商务：有形货物
  - 直接电子商务：软件、电子图书、媒体、支付、下载

### 二、电子商务的 3 个阶段

1. 交易前：市场调查、销售策略方式、宣传、比价、注册、支付
2. 交易中：确定订单、物流信息
3. 交易后：确认付款、售后、评价

### 三、电子商务的主要职能

1. 企业业务组织
2. 信息发布与广告宣传
3. 咨询洽谈
4. 在线选购
5. 网上支付
6. 交易管理
7. 数据统计与挖掘

### 四、电子商务系统的一般结构

1. 网络平台
2. 信息传输平台：网站、APP
3. 电子商务平台：数据库、安全服务器、账号服务器、数据中心、认证中心、支付中心、呼叫中心
4. 电子商务应用系统：网上商城、在线服务
5. 技术标准和法律法规：
  - 电子商务系统实体：客户、供货方、支付机构、认证中心、销售中心、配送中心
  - 电子商务业务流程：开户、支付、选购、下单、划账、认证、发货、配送


## 思考与练习

1. 请简述一般的客户机/服务器模式和 P2P 模式的工作特点。
2. 新一代网络形态和技术有哪些？
3. 即时通信工具 QQ 是基于哪种网络应用服务模式的？
4. DNS 的顶级域名包含哪 3 大类？
5. DNS 的域名服务器主要包括哪 4 类？
6. DNS 域名解析分为哪两种方式？每种方式各自在什么情况下使用？
7. DNS 进行查询使用的是哪种传输层协议？
8. 请简述 FTP 服务器主进程的工作步骤。
9. FTP 服务使用的是哪种传输层协议？
10. 电子邮件系统主要由哪 3 部分构成？各部分的功能是什么？
11. 如果用户想在不同的地点使用不同的计算机实现邮件接收服务，则应用到哪种解件接收协议？
12. 请简述 HTTP 规定的用户使用浏览器访问万维网的过程。
13. 如果用户浏览网页时输入了错误的 URL，会在浏览器页面中看到什么样的状态代码和状态描述？
14. HTTP 的请求报文由哪几部分构成？
15. Cookie 技术常见的用途包括哪些？
16. Session 机制与 Cookie 机制的最根本不同是什么？
17. HTML 通过什么指示浏览器以何种方式显示网页中的文本信息？
18. 可扩展标记语言 XML 的主要特点是什么？
19. 请简述静态万维网文档和动态万维网文档的区别。
20. 请简述 B2B、B2C、C2C 和 O2O 电子商务类型的含义及其代表应用。
21. 电子商务系统一般包含哪些元素？
22. 电子商务系统的主要功能有哪些？
